---
description: See Specific updates for each Bounty
---

# Updates

## August 7th



[PR 202](https://github.com/Stacks-Builders/sbtc-bridge-web/pull/202) Separate sBTC alpha deployment

[PR 200](https://github.com/Stacks-Builders/sbtc-bridge-web/pull/200) Currency support in UI

[PR 59](https://github.com/Stacks-Builders/sbtc-bridge-api/pull/59) Separate sBTC alpha deployment&#x20;

[PR 56](https://github.com/Stacks-Builders/sbtc-bridge-api/pull/56) Feat/55 signer api microservice

[PR 53](https://github.com/Stacks-Builders/sbtc-bridge-api/pull/53) Withdrawal and deposit payloads for sBTC Alpha&#x20;

## July 25th

[PR 193](https://github.com/Stacks-Builders/sbtc-bridge-web/pull/193)

Several days debugging byte array and hex strings with @netrome. hard work paid off - led to first successfuly sBTC Alpha withdrawal: [https://twitter.com/radicleart/status/1683801378668396545](https://twitter.com/radicleart/status/1683801378668396545)&#x20;

## July 18th

* Testing and improvements of the withdrawal for op\_return see [discord](https://discord.com/channels/621759717756370964/1128678006165086289/1130791340146434139) and [Issue 187](https://github.com/Stacks-Builders/sbtc-bridge-web/issues/187)
* Currency support - see [PR 185](https://github.com/Stacks-Builders/sbtc-bridge-web/pull/185)&#x20;

## June 26nd

[PR 158](https://github.com/Trust-Machines/sbtc-bridge-web/pull/158) - UX feedback - remove all mention of satoshi

## June 22nd

Finished [Bridge API PR 34](https://github.com/Trust-Machines/sbtc-bridge-api/pull/34) - adds efficient endpoints for the UI and endpoints to support electrum plugin for building the taproot commitment and payload data.

Merged [PR 155](https://github.com/Trust-Machines/sbtc-bridge-web/pull/155) - improvements to deposit and withdrawals for both op\_drop and op\_return

Merged [PR 154](https://github.com/Trust-Machines/sbtc-bridge-web/pull/154) Design Implementation

## June 12nd

Stacks Signer Dashboard Bounty - made a start on the web app - setup the GitHub repo. Reusing the Design for the Bridge but with some minor modifications. Hosting the app so it interlinks seamlessly with the Bridge but exists in different code base.

## June 2nd

Implementing Maximes' [Design System](https://www.figma.com/file/U9gWHsY6f3pOBt5zyB6vip/Stacks---Grants?type=design\&node-id=876-0\&t=ZU45dLBVUS9GpBm0-0). Tracked by [Issue 145](https://github.com/Trust-Machines/sbtc-bridge-web/issues/145) and rebuild the UI using Tailwind (replacing use of Bootstrap) for a modern design.

## May 26th

Two ([Web](https://github.com/Trust-Machines/sbtc-bridge-web/pull/143) and [API](https://github.com/Trust-Machines/sbtc-bridge-api/pull/32)) PRs move a set of key pairs into the server - accessible via environment vars on the target machine.

The keys are able to spend the reveal and reclaim script paths generated by the deposit. Having them as custodial keys means;

a) the bridge can generate test reveal transaction\
b) the bridge can refund users bitcoin if no spent by the reveal

The corresponding public keys are accessible from the API via;

* [https://testnet.stx.eco/bridge-api/testnet/v1/btc/tx/keys](https://testnet.stx.eco/bridge-api/testnet/v1/btc/tx/keys)



Raised [Issue 3742](https://github.com/hirosystems/wallet/issues/3742) with Hiro web wallet on signing the psbt for the reclaim.

PRs [141](https://github.com/Trust-Machines/sbtc-bridge-web/pull/141) and [31](https://github.com/Trust-Machines/sbtc-bridge-api/pull/31) on web / api respec. These deal with tracking commit / reveal / reclaim transactions starting from the initial user commitment. The status of the overall flow is shown to the user along with the ability to generate PSBTs for both reclaim and reveal (the latter for testing purposes).

Two paths;

* /reclaims
* /reclaims/reclaim/\_id

the former displays deposits and provides filters (tbd). The latter provides buttons to integrate with Stacks Web Wallets, details about the transactions and displays raw PSBT data in hex and b64 encoding for copying to wallet software.

## May 19th

19th merged two PRs related to [Create typescript Bridge library](https://github.com/Trust-Machines/sbtc-bridge-api/issues/27). Creates a shared lib for the web and api projects containing the common functions;

* building and parsing deposit payloads
* building and parsing withdrawal payloads
* signing, hashing and recovering public keys from signatures
* commitment witness data

15th - Wrote some User Stories for the deposit and withdraw flows and setup Trello Kanban board.

16th - Dealing with [https://github.com/Trust-Machines/core-eng/issues/341](https://github.com/Trust-Machines/core-eng/issues/341) on 0 padding of the stacks payload data and fine tuning of the deposit parameters - see also [https://github.com/Trust-Machines/core-eng/pull/339#discussion\_r1194208407](https://github.com/Trust-Machines/core-eng/pull/339#discussion\_r1194208407).

## May 12th

Following reveal transaction (using op\_drop and taproot) has been tested on Bitcoin testnet.&#x20;

The example below uses an internal random private key for signing and pays the reveal and reclaim paths to Schnorr pubkeys;

```typescript
revealPub: schnorr.getPublicKey(testWallets[0].privateKey) as Uint8Array,
reclaimPub: schnorr.getPublicKey(testWallets[1].privateKey) as Uint8Array,
```

With following script

```
const scripts =  [
    { script: btc.Script.encode([data, 'DROP', revealPubK, 'CHECKSIG']) },
    { script: btc.Script.encode([reclaimPubK, 'CHECKSIG']) }
]
const script = btc.p2tr(btc.TAPROOT_UNSPENDABLE_KEY, scripts, this.net, true);
```

Still to do;

* reclaim transaction
* make the reclaim payable to any segwit (v0 or v1) address
* prove this works for general taproot address, and
* show arbitrary wallets can sign the reveal/reclaim transactions

Details from [this thread](https://discord.com/channels/1076608263983997008/1105549945588690964/1106214970401751041) in discord;

1. Making progress now see [https://mempool.space/testnet/address/tb1p5yh4frytaszrkng0xs0tjdnmg9806d4arrl9emxdtaxj9g8zrgjqxpunh0](https://mempool.space/testnet/address/tb1p5yh4frytaszrkng0xs0tjdnmg9806d4arrl9emxdtaxj9g8zrgjqxpunh0)
2. _\[_14:45_]_Marvin you were right about the op code - this tx has OP\_CHECKSIG at the end. See pic..![Image](https://media.discordapp.net/attachments/1105549945588690964/1106215510602952734/Screenshot\_2023-05-11\_at\_14.44.44.png?width=1100\&height=452)
3. _\[_14:45_]_BTW Sparrow Wallet is amazing if you haven't tried it - great feedback.
4. _\[_14:47_]_i've not worried too much aboiut the stacks data as yet and need to make this work for a general pubkey and not just a random private key but getting there...
5. _\[_14:48_]_for completeness the commit to the above is [https://mempool.space/testnet/tx/0d3b60a186ebc92b9ee7a1905a44479cc9217d576ce803429ed553378620a416](https://mempool.space/testnet/tx/0d3b60a186ebc92b9ee7a1905a44479cc9217d576ce803429ed553378620a416)[Bitcoin Testnet Transaction: 0d3b60a186ebc92b9ee7a1905a44479cc9217d...](https://mempool.space/testnet/tx/0d3b60a186ebc92b9ee7a1905a44479cc9217d576ce803429ed553378620a416)![Bitcoin Testnet Transaction: 0d3b60a186ebc92b9ee7a1905a44479cc9217d...](https://images-ext-2.discordapp.net/external/vGyEonulkaGjsGx3PBSGM8N-JoDmL6kZQSJFKGv-nc4/https/mempool.fra.mempool.space/render/en/preview/testnet/tx/0d3b60a186ebc92b9ee7a1905a44479cc9217d576ce803429ed553378620a416?width=800\&height=400)

## May 5th

* [Issue 105](https://github.com/Trust-Machines/sbtc-bridge-web/issues/105) - Commitment transaction. Exploring ways to build the reclaim and reveal script paths. Committed [PR 105](https://github.com/Trust-Machines/sbtc-bridge-web/pull/106) whch tidies up code around buildng the commit tx. Several option exist but they wll be rationalised in later PR.
* Created a [risk assessment](https://brighton-blockchain.gitbook.io/sbtc-bridge/sbtc-bridge-plan/risks/commitment-risks) on the Mini sBTC pegin requirements.
* Finished off CI - `staging` branch s now default for PRs - serves as a safety latch for production builds.

## April 28th

* Switching the commit tx from p2wsh to p2tr. Mostly learning taproot/tapscript. Adjusted the ui and api to handle the tapscript data
* Writing a blog post on this experience - working title “sBTC Commit Transactions”
* Design issues: [https://trustlessbridge.io/](https://trustlessbridge.io/)

## April 21st

* What do we want to achieve this week?
  * Working on the p2tr commitment transaction.
  * Trying to figure out how to build the PSBT to spend the script paths from the pegin.
* Which blockers must be resolved to achieve this?
  * Reach out to dev working on Electrum plugin
  * pato2k5@gmail.com setpato#7961
